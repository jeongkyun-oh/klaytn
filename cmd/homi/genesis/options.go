// Copyright 2018 The klaytn Authors
// Copyright 2017 AMIS Technologies
// This file is part of the go-ethereum library.
//
// The go-ethereum library is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// The go-ethereum library is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with the go-ethereum library. If not, see <http://www.gnu.org/licenses/>.

package genesis

import (
	"github.com/ground-x/klaytn/cmd/homi/extra"
	"github.com/ground-x/klaytn/consensus/clique"
	"github.com/ground-x/klaytn/contracts/reward/contract"
	"github.com/ground-x/klaytn/log"
	"github.com/ground-x/klaytn/params"
	"math/big"

	"github.com/ground-x/klaytn/blockchain"
	"github.com/ground-x/klaytn/common"
	"github.com/ground-x/klaytn/common/hexutil"
)

type Option func(*blockchain.Genesis)

const BaobabInitContrctBin = "0x6080604052600436106101505763ffffffff60e060020a6000350416630b81604581146101555780630d11f967146102225780631e482f821461028d57806320ea8d861461030757806327e1f7df1461031f5780632d9c3439146103405780632f0bcc341461036757806332be31001461039e578063392e53cd146103c95780634f97638f146103f2578063545d0e991461040757806358d658801461041c5780635badbe4c146104315780636e417c6914610446578063704802751461045e578063715b208b1461047f5780637408b0dc1461052d5780639ed5724a14610591578063a2320f03146105b1578063a6b2c4371461061a578063b13fe92414610632578063b6cad6cd14610663578063b756393014610717578063c2c71c511461072c578063c3d5fd39146107a0578063c47afb3a146107b5578063c97a49b6146107cd578063fd7d4f6f14610871575b600080fd5b34801561016157600080fd5b5061016d600435610886565b60408051600160a060020a0389168152602080820189905260608201879052851515608083015284151560a083015283151560c083015260e0928201838152885193830193909352875191929161010084019189019080838360005b838110156101e15781810151838201526020016101c9565b50505050905090810190601f16801561020e5780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b34801561022e57600080fd5b5060408051602060046024803582810135601f810185900485028601850190965285855261028b95833595369560449491939091019190819084018382808284375094975050509235600160a060020a0316935061097f92505050565b005b34801561029957600080fd5b506102b7600435602435604435151560643515156084351515610cb3565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156102f35781810151838201526020016102db565b505050509050019250505060405180910390f35b34801561031357600080fd5b5061028b600435610e90565b34801561032b57600080fd5b5061028b600160a060020a0360043516611072565b34801561034c57600080fd5b50610355611222565b60408051918252519081900360200190f35b34801561037357600080fd5b5061028b600160a060020a036004358116906024359060443581169060643581169060843516611228565b3480156103aa57600080fd5b5061028b600160a060020a0360043581169060243590604435166112a8565b3480156103d557600080fd5b506103de611316565b604080519115158252519081900360200190f35b3480156103fe57600080fd5b5061028b61131f565b34801561041357600080fd5b506103556113e5565b34801561042857600080fd5b506103556113eb565b34801561043d57600080fd5b506103556113f0565b34801561045257600080fd5b5061028b6004356113f6565b34801561046a57600080fd5b5061028b600160a060020a03600435166115de565b34801561048b57600080fd5b50610494611724565b604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156104d85781810151838201526020016104c0565b50505050905001838103825284818151815260200191508051906020019060200280838360005b838110156105175781810151838201526020016104ff565b5050505090500194505050505060405180910390f35b34801561053957600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261028b94369492936024939284019190819084018382808284375094975050509235600160a060020a03169350611b8f92505050565b34801561059d57600080fd5b5061028b60048035602481019101356120b5565b3480156105bd57600080fd5b50604080516020600460443581810135601f810184900484028501840190955284845261028b948235600160a060020a03169460248035953695946064949201919081908401838280828437509497506121d59650505050505050565b34801561062657600080fd5b5061028b600435612412565b34801561063e57600080fd5b5061028b60048035600160a060020a03169060248035916044359182019101356125c1565b34801561066f57600080fd5b5061067b60043561265b565b60405180806020018415151515815260200183600160a060020a0316600160a060020a03168152602001828103825285818151815260200191508051906020019080838360005b838110156106da5781810151838201526020016106c2565b50505050905090810190601f1680156107075780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34801561072357600080fd5b50610355612734565b34801561073857600080fd5b5060408051602060046024803582810135601f810185900485028601850190965285855261028b95833595369560449491939091019190819084018382808284375094975050600160a060020a03853581169650602090950135909416935061273a92505050565b3480156107ac57600080fd5b506102b7612a95565b3480156107c157600080fd5b5061028b600435612af8565b3480156107d957600080fd5b506040805160206004803580820135838102808601850190965280855261028b9536959394602494938501929182918501908490808284375050604080516020601f818a01358b0180359182018390048302840183018552818452989b8a359b909a90999401975091955091820193509150819084018382808284375094975050509235600160a060020a03169350612b7f92505050565b34801561087d57600080fd5b506104946131eb565b60008181526005602090815260408083208054600180830154600484015460068501546002958601805488516101009682161587026000190190911697909704601f81018a90048a0288018a0190985287875289986060988a98899889988998600160a060020a03909216979196919460ff8084169592840481169462010000909404169291879183018282801561095f5780601f106109345761010080835404028352916020019161095f565b820191906000526020600020905b81548152906001019060200180831161094257829003601f168201915b505050505094509650965096509650965096509650919395979092949650565b80600160a060020a038116151561099557600080fd5b600160a060020a038216600090815260066020526040902054829060ff1615156109be57600080fd5b3330146109ca57600080fd5b600a5460ff1615156001146109de57600080fd5b600085815260086020526040902060010154600160a060020a03848116911614610a0757600080fd5b836040516020018082805190602001908083835b60208310610a3a5780518252601f199092019160209182019101610a1b565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310610a9d5780518252601f199092019160209182019101610a7e565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916600860008781526020019081526020016000206000016040516020018082805460018160011615610100020316600290048015610b425780601f10610b20576101008083540402835291820191610b42565b820191906000526020600020905b815481529060010190602001808311610b2e575b50509150506040516020818303038152906040526040518082805190602001908083835b60208310610b855780518252601f199092019160209182019101610b66565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515610bc257600080fd5b600160a060020a0383166000818152600660209081526040808320805460ff19169055888352600882529182902082518981529283019390935260609082018181528354600260001960018316156101000201909116049183018290527f67785cf16c29d07570d5093a10f1bf680274ff9ddb015bb801999c18cd558fa49389939092889290608083019085908015610c9c5780601f10610c7157610100808354040283529160200191610c9c565b820191906000526020600020905b815481529060010190602001808311610c7f57829003601f168201915b505094505050505060405180910390a15050505050565b606060008082871580610cc857506002548810155b15610cd35760025497505b600092508891505b87821015610d8857600082815260056020526040902054600160a060020a031615801590610d20575060008281526005602052604090206006015460ff161515871515145b8015610d485750600082815260056020526040902060060154610100900460ff161515861515145b8015610d71575060008281526005602052604090206006015462010000900460ff161515851515145b15610d7d576001830192505b600190910190610cdb565b82604051908082528060200260200182016040528015610db2578160200160208202803883390190505b509050600092508891505b87821015610e8457600082815260056020526040902054600160a060020a031615801590610e02575060008281526005602052604090206006015460ff161515871515145b8015610e2a5750600082815260056020526040902060060154610100900460ff161515861515145b8015610e53575060008281526005602052604090206006015462010000900460ff161515851515145b15610e7957818184815181101515610e6757fe5b60209081029091010152600192909201915b600190910190610dbd565b98975050505050505050565b3360008181526004602052604090205460ff161515610eae57600080fd5b60008281526005602081815260408084203380865293019091529091205483919060ff161515610edd57600080fd5b6000848152600560205260409020600601548490610100900460ff1615610f0357600080fd5b600085815260056020526040902060060154859062010000900460ff1615610f2a57600080fd5b60008681526005602081815260408084203385528084018352908420805460ff19169055928990525260040154610f6890600163ffffffff6132f816565b6000878152600560209081526040918290206004019290925580514281529051339289927f0689115a9648267371febe5b74f8643f532350a9a41d4be1756e1e9030c44b17929081900390910190a36001546000878152600560205260409020600401541015610fef576000868152600560205260409020600601805460ff191660011790555b600086815260056020526040902060030154600160a060020a031633141561106a57600086815260056020908152604091829020600601805462ff000019166201000017905581514281529151339289927f25434cd4ef6bc8bcb8c09466f4a148d49a8808e55c4ff151173394bac0164ce192918290030190a35b505050505050565b600033301461108057600080fd5b600160a060020a038216600090815260046020526040902054829060ff1615156110a957600080fd5b6000546110bd90600163ffffffff6132f816565b600154603282111580156110d15750818111155b80156110dc57508015155b80156110e757508115155b15156110f257600080fd5b600160a060020a0385166000908152600460205260408120805460ff1916905593505b600054600019018410156111cb5784600160a060020a031660008581548110151561113c57fe5b600091825260209091200154600160a060020a031614156111c05760008054600019810190811061116957fe5b60009182526020822001548154600160a060020a0390911691908690811061118d57fe5b9060005260206000200160006101000a815481600160a060020a030219169083600160a060020a031602179055506111cb565b600190930192611115565b6000805460001901906111de908261334b565b506111e761131f565b604051600160a060020a038616907f1af6bd3d85a56e7c4a0700756fd2ca3b3b65c266e56c77652c5a346bc256522090600090a25050505050565b60035481565b3360008181526006602052604090205460ff16151561124657600080fd5b60408051600160a060020a038089168252602082018890528087168284015280861660608301528416608082015290517f43341da6506b6e80e576b49a91bffc0dd90c6f218b6b19d753caf865a9a5caf49181900360a00190a1505050505050565b3360008181526006602052604090205460ff1615156112c657600080fd5b60408051600160a060020a0380871682526020820186905284168183015290517f58b09a47044d0872fa22b29a2c4d30639d1e6a48d8434efcb9f6994e1b3755e39181900360600190a150505050565b600a5460ff1681565b600033301461132d57600080fd5b506003545b6002548110156113a957600081815260056020526040902060060154610100900460ff1615801561137b575060008181526005602052604090206006015462010000900460ff16155b156113a1576000818152600560205260409020600601805462ff00001916620100001790555b600101611332565b6002546003556040805142815290517fb9ce9c85727b055bd75ed2418c65d65f31157821337419862d2042439d60168d9181900360200190a150565b60095481565b603281565b60025481565b3360008181526004602052604081205490919060ff16151561141757600080fd5b600083815260056020526040902060060154839060ff161561143857600080fd5b6000848152600560205260409020600601548490610100900460ff161561145e57600080fd5b600085815260056020526040902060060154859062010000900460ff161561148557600080fd5b60008681526005602090815260409182902060068101805461010061ff001990911681179091558154600180840154600280860180548951948116159096026000190190951604601f8101879004870283018701909752868252939a5061155395600160a060020a03909216949192909183908301828280156115495780601f1061151e57610100808354040283529160200191611549565b820191906000526020600020905b81548152906001019060200180831161152c57829003601f168201915b505050505061330f565b1561159457604080514281529051339188917f55d47b3ef994e6498ee206748741ea9f316c915fecd2f02ba467e113f64ab7ee9181900360200190a361106a565b604080514281529051339188917f5ebb796d512ca336f8595033b3fbee6cfee4f065de25e3e721c735911dc546f79181900360200190a350505050600601805461ff001916905550565b3330146115ea57600080fd5b600160a060020a038116600090815260046020526040902054819060ff161561161257600080fd5b81600160a060020a038116151561162857600080fd5b60005461163c90600163ffffffff61333216565b600154603282111580156116505750818111155b801561165b57508015155b801561166657508115155b151561167157600080fd5b600160a060020a0385166000818152600460205260408120805460ff19166001908117909155815490810182559080527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e56301805473ffffffffffffffffffffffffffffffffffffffff191690911790556116e961131f565b604051600160a060020a038616907fad6de4452a631e641cb59902236607946ce9272b9b981f2f80e8d129cb9084ba90600090a25050505050565b60608060006060600080606080606080600954604051908082528060200260200182016040528015611760578160200160208202803883390190505b509650600095505b60095486101561187c57600086815260086020908152604080832060010154600160a060020a03168352600690915290205460ff16156118715760008681526008602090815260408083206001015481517fe024c2d00000000000000000000000000000000000000000000000000000000081529151600160a060020a039091169363e024c2d093600480850194919392918390030190829087803b15801561181057600080fd5b505af1158015611824573d6000803e3d6000fd5b505050506040513d602081101561183a57600080fd5b5051875188908890811061184a57fe5b60209081029091010152865187908790811061186257fe5b90602001906020020151880197505b600190950194611768565b876040519080825280602002602001820160405280156118a6578160200160208202803883390190505b509350876040519080825280602002602001820160405280156118d3578160200160208202803883390190505b509250600095505b600954861015611b805786868151811015156118f357fe5b6020908102909101015115611b7557868681518110151561191057fe5b90602001906020020151604051908082528060200260200182016040528015611943578160200160208202803883390190505b509150868681518110151561195457fe5b90602001906020020151604051908082528060200260200182016040528015611987578160200160208202803883390190505b506000878152600860205260408082206001015481517f715b208b0000000000000000000000000000000000000000000000000000000081529151939450600160a060020a03169263715b208b9260048084019391929182900301818387803b1580156119f357600080fd5b505af1158015611a07573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040908152811015611a3057600080fd5b810190808051640100000000811115611a4857600080fd5b82016020810184811115611a5b57600080fd5b8151856020820283011164010000000082111715611a7857600080fd5b50509291906020018051640100000000811115611a9457600080fd5b82016020810184811115611aa757600080fd5b8151856020820283011164010000000082111715611ac457600080fd5b5060009a509496509450505050505b8686815181101515611ae157fe5b90602001906020020151851015611b75578185815181101515611b0057fe5b9060200190602002015184868801815181101515611b1a57fe5b60ff9092166020928302909101909101528051819086908110611b3957fe5b9060200190602002015183868801815181101515611b5357fe5b600160a060020a03909216602092830290910190910152600190940193611ad3565b6001909501946118db565b50919890975095505050505050565b600081600160a060020a0381161515611ba757600080fd5b600160a060020a038316600090815260066020526040902054839060ff1615611bcf57600080fd5b846007816040518082805190602001908083835b60208310611c025780518252601f199092019160209182019101611be3565b51815160209384036101000a600019018019909216911617905292019485525060405193849003019092205460ff16159150611c3f905057600080fd5b858580600160a060020a031663345309986040518163ffffffff1660e060020a028152600401600060405180830381600087803b158015611c7f57600080fd5b505af1158015611c93573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526020811015611cbc57600080fd5b810190808051640100000000811115611cd457600080fd5b82016020810184811115611ce757600080fd5b8151640100000000811182820187101715611d0157600080fd5b50509291905050506040516020018082805190602001908083835b60208310611d3b5780518252601f199092019160209182019101611d1c565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310611d9e5780518252601f199092019160209182019101611d7f565b51815160209384036101000a60001901801990921691161790526040519190930181900381208751909550879450908301928392508401908083835b60208310611df95780518252601f199092019160209182019101611dda565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310611e5c5780518252601f199092019160209182019101611e3d565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515611e9957600080fd5b333014611ea557600080fd5b600a5460ff161515600114611eb957600080fd5b8751600010611ec757600080fd5b6009546040805180820182528a8152600160a060020a038a166020808301919091526000848152600882529290922081518051949a5091939092611f0f928492910190613374565b5060208201518160010160006101000a815481600160a060020a030219169083600160a060020a0316021790555090505060016007896040518082805190602001908083835b60208310611f745780518252601f199092019160209182019101611f55565b51815160001960209485036101000a8101918216911992909216179091529390910195865260408051968790038201909620805497151560ff19988916179055600160a060020a038e16600090815260069091529490942080549095166001179094555050600954919091109050611feb57600080fd5b60098054600101905560408051878152600160a060020a03891691810191909152606060208083018281528b51928401929092528a517ffa9b2165fc71c1d6ffa03291c7f5d223ea363ec063d747eec9ce2d30d24855ef938a938d938d93608084019186019080838360005b8381101561206f578181015183820152602001612057565b50505050905090810190601f16801561209c5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15050505050505050565b81818080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050506007816040518082805190602001908083835b6020831061211a5780518252601f1990920191602091820191016120fb565b51815160209384036101000a600019018019909216911617905292019485525060405193849003019092205460ff1615159150612158905057600080fd5b3360008181526006602052604090205460ff16151561217657600080fd5b6040805133602082018190528282529181018590527f933b0e6ba22c9fa6e54e9f516cf6cf46ff1498a763ae2aaee6a4d23425bc2e7791869186919080606081018585808284376040519201829003965090945050505050a150505050565b600083600160a060020a03811615156121ed57600080fd5b3360008181526004602052604090205460ff16151561220b57600080fd5b600280546040805161010081018252600160a060020a038a8116825260208083018b81528385018b8152336060860152600060808601819052600160a0870181905260c0870182905260e08701829052888252600585529690208551815473ffffffffffffffffffffffffffffffffffffffff1916951694909417845590519483019490945592518051949850919490936122ad939185019290910190613374565b50606082810151600383018054600160a060020a0392831673ffffffffffffffffffffffffffffffffffffffff19909116179055608080850151600485015560a0808601516006909501805460c088015160e0909801511515620100000262ff0000199815156101000261ff001998151560ff19909316929092179790971617969096169490941790945560408051918b16825260208083018b9052429383018490529082018581528951958301959095528851339589957fd7c11897713533deb6e710c30ab1de0e47826511b50cef8b93e1d30d675c32cb958e958e958e95929491939192918401919086019080838360005b838110156123b95781810151838201526020016123a1565b50505050905090810190601f1680156123e65780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a360025461240a90600163ffffffff61333216565b60025561106a835b3360008181526004602052604090205460ff16151561243057600080fd5b600082815260056020526040902060060154829060ff16151561245257600080fd5b60008381526005602081815260408084203380865293019091529091205484919060ff161561248057600080fd5b6000858152600560205260409020600601548590610100900460ff16156124a657600080fd5b600086815260056020526040902060060154869062010000900460ff16156124cd57600080fd5b60008781526005602081815260408084203385528084018352908420805460ff19166001908117909155938b9052919052600401546125119163ffffffff61333216565b600088815260056020908152604091829020600401929092558051428152905133928a927f4509facb2564521097d4675ebc3f50a6123df0d145d57229534536e677e7f042929081900390910190a360015460008881526005602052604090206004015410612594576000878152600560205260409020600601805460ff191690555b60008781526005602052604090206006015460ff1615156125b8576125b8876113f6565b50505050505050565b3360008181526006602052604090205460ff1615156125df57600080fd5b7fc7b359b1e189b7d721be7f0765a8d745be718566b8e67cbd2728dae5d6fd64b6858585856040518085600160a060020a0316600160a060020a03168152602001848152602001806020018281038252848482818152602001925060200280828437604051920182900397509095505050505050a15050505050565b6000818152600860208181526040808420600180820154600160a060020a0316808752600685528387205488885295855282548451600261010094831615949094026000190190911692909204601f8101869004860283018601909452838252606096958695939460ff909116939192918591908301828280156127205780601f106126f557610100808354040283529160200191612720565b820191906000526020600020905b81548152906001019060200180831161270357829003601f168201915b505050505092509250925092509193909250565b60015481565b80600160a060020a038116151561275057600080fd5b600160a060020a038316600090815260066020526040902054839060ff16151561277957600080fd5b33301461278557600080fd5b600a5460ff16151560011461279957600080fd5b600086815260086020526040902060010154600160a060020a038581169116146127c257600080fd5b846040516020018082805190602001908083835b602083106127f55780518252601f1990920191602091820191016127d6565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083106128585780518252601f199092019160209182019101612839565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019166008600088815260200190815260200160002060000160405160200180828054600181600116156101000203166002900480156128fd5780601f106128db5761010080835404028352918201916128fd565b820191906000526020600020905b8154815290600101906020018083116128e9575b50509150506040516020818303038152906040526040518082805190602001908083835b602083106129405780518252601f199092019160209182019101612921565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206000191614151561297d57600080fd5b826008600088815260200190815260200160002060010160006101000a815481600160a060020a030219169083600160a060020a031602179055507f6ebec3bc09570e3cf26482a73a6ff7af913480e4d50ccadf106ce6f33d560ddd86868686604051808581526020018060200184600160a060020a0316600160a060020a0316815260200183600160a060020a0316600160a060020a03168152602001828103825285818151815260200191508051906020019080838360005b83811015612a50578181015183820152602001612a38565b50505050905090810190601f168015612a7d5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a1505050505050565b60606000805480602002602001604051908101604052809291908181526020018280548015612aed57602002820191906000526020600020905b8154600160a060020a03168152600190910190602001808311612acf575b505050505090505b90565b333014612b0457600080fd5b6000548160328211801590612b195750818111155b8015612b2457508015155b8015612b2f57508115155b1515612b3a57600080fd5b6001839055612b4761131f565b6040805184815290517f8951393946c27b45080aad111464c16c70f3d5e7d24b114a627334441961bf5f9181900360200190a1505050565b60008085518560328211158015612b965750818111155b8015612ba157508015155b8015612bac57508115155b1515612bb757600080fd5b858580600160a060020a031663345309986040518163ffffffff1660e060020a028152600401600060405180830381600087803b158015612bf757600080fd5b505af1158015612c0b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526020811015612c3457600080fd5b810190808051640100000000811115612c4c57600080fd5b82016020810184811115612c5f57600080fd5b8151640100000000811182820187101715612c7957600080fd5b50509291905050506040516020018082805190602001908083835b60208310612cb35780518252601f199092019160209182019101612c94565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310612d165780518252601f199092019160209182019101612cf7565b51815160209384036101000a60001901801990921691161790526040519190930181900381208751909550879450908301928392508401908083835b60208310612d715780518252601f199092019160209182019101612d52565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310612dd45780518252601f199092019160209182019101612db5565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515612e1157600080fd5b7383fdd31030e6cc6a527fb8923801ef843d8488be3314612e3157600080fd5b600a5460ff1615612e4157600080fd5b8751600010612e4f57600080fd5b600095505b8951861015612f2057600460008b88815181101515612e6f57fe5b6020908102909101810151600160a060020a031682528101919091526040016000205460ff16158015612ec357508986815181101515612eab57fe5b90602001906020020151600160a060020a0316600014155b1515612ece57600080fd5b6001600460008c89815181101515612ee257fe5b602090810291909101810151600160a060020a03168252810191909152604001600020805460ff191691151591909117905560019590950194612e54565b8951612f339060009060208d01906133f2565b5060018990556009546040805180820182528a8152600160a060020a038a16602080830191909152600084815260088252929092208151805194995091939092612f81928492910190613374565b5060208201518160010160006101000a815481600160a060020a030219169083600160a060020a0316021790555090505060016007896040518082805190602001908083835b60208310612fe65780518252601f199092019160209182019101612fc7565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060006101000a81548160ff02191690831515021790555060016006600089600160a060020a0316600160a060020a0316815260200190815260200160002060006101000a81548160ff02191690831515021790555060016009600082825401925050819055506001600a60006101000a81548160ff0219169083151502179055507ffa9b2165fc71c1d6ffa03291c7f5d223ea363ec063d747eec9ce2d30d24855ef858989604051808481526020018060200183600160a060020a0316600160a060020a03168152602001828103825284818151815260200191508051906020019080838360005b83811015613119578181015183820152602001613101565b50505050905090810190601f1680156131465780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a17ffa3e1e272694072320aad73a3fadd8876c4bf8f40899c6c7ce2fda9f4e652cfa6000600154604051808060200183815260200182810382528481815481526020019150805480156131d057602002820191906000526020600020905b8154600160a060020a031681526001909101906020018083116131b2575b5050935050505060405180910390a150505050505050505050565b606080606080600060095460405190808252806020026020018201604052801561321f578160200160208202803883390190505b50925060095460405190808252806020026020018201604052801561324e578160200160208202803883390190505b509150600090505b6009548110156132ee576000818152600860205260409020600101548351600160a060020a039091169084908390811061328c57fe5b600160a060020a039283166020918202909201810191909152600083815260088252604080822060010154909316815260069091522054825160ff909116908390839081106132d757fe5b911515602092830290910190910152600101613256565b5090939092509050565b6000808383111561330857600080fd5b5050900390565b6000806040516020840160008287838a8c6187965a03f198975050505050505050565b60008282018381101561334457600080fd5b9392505050565b81548183558181111561336f5760008381526020902061336f918101908301613460565b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106133b557805160ff19168380011785556133e2565b828001600101855582156133e2579182015b828111156133e25782518255916020019190600101906133c7565b506133ee929150613460565b5090565b828054828255906000526020600020908101928215613454579160200282015b82811115613454578251825473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03909116178255602090920191600190910190613412565b506133ee92915061347a565b612af591905b808211156133ee5760008155600101613466565b612af591905b808211156133ee57805473ffffffffffffffffffffffffffffffffffffffff191681556001016134805600a165627a7a7230582093756fe617053766b158f7c64998c746eb38f0d5431cc50231cc9fb2cd1fd9950029"
const PrebaobabInitContractBin = "0x6080604052600436106101505763ffffffff60e060020a6000350416630b81604581146101555780630d11f967146102225780631e482f821461028d57806320ea8d861461030757806327e1f7df1461031f5780632d9c3439146103405780632f0bcc341461036757806332be31001461039e578063392e53cd146103c95780634f97638f146103f2578063545d0e991461040757806358d658801461041c5780635badbe4c146104315780636e417c6914610446578063704802751461045e578063715b208b1461047f5780637408b0dc1461052d5780639ed5724a14610591578063a2320f03146105b1578063a6b2c4371461061a578063b13fe92414610632578063b6cad6cd14610663578063b756393014610717578063c2c71c511461072c578063c3d5fd39146107a0578063c47afb3a146107b5578063c97a49b6146107cd578063fd7d4f6f14610871575b600080fd5b34801561016157600080fd5b5061016d600435610886565b60408051600160a060020a0389168152602080820189905260608201879052851515608083015284151560a083015283151560c083015260e0928201838152885193830193909352875191929161010084019189019080838360005b838110156101e15781810151838201526020016101c9565b50505050905090810190601f16801561020e5780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b34801561022e57600080fd5b5060408051602060046024803582810135601f810185900485028601850190965285855261028b95833595369560449491939091019190819084018382808284375094975050509235600160a060020a0316935061097f92505050565b005b34801561029957600080fd5b506102b7600435602435604435151560643515156084351515610cb3565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156102f35781810151838201526020016102db565b505050509050019250505060405180910390f35b34801561031357600080fd5b5061028b600435610e90565b34801561032b57600080fd5b5061028b600160a060020a0360043516611072565b34801561034c57600080fd5b50610355611222565b60408051918252519081900360200190f35b34801561037357600080fd5b5061028b600160a060020a036004358116906024359060443581169060643581169060843516611228565b3480156103aa57600080fd5b5061028b600160a060020a0360043581169060243590604435166112a8565b3480156103d557600080fd5b506103de611316565b604080519115158252519081900360200190f35b3480156103fe57600080fd5b5061028b61131f565b34801561041357600080fd5b506103556113e5565b34801561042857600080fd5b506103556113eb565b34801561043d57600080fd5b506103556113f0565b34801561045257600080fd5b5061028b6004356113f6565b34801561046a57600080fd5b5061028b600160a060020a03600435166115de565b34801561048b57600080fd5b50610494611724565b604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156104d85781810151838201526020016104c0565b50505050905001838103825284818151815260200191508051906020019060200280838360005b838110156105175781810151838201526020016104ff565b5050505090500194505050505060405180910390f35b34801561053957600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261028b94369492936024939284019190819084018382808284375094975050509235600160a060020a03169350611b8f92505050565b34801561059d57600080fd5b5061028b60048035602481019101356120b5565b3480156105bd57600080fd5b50604080516020600460443581810135601f810184900484028501840190955284845261028b948235600160a060020a03169460248035953695946064949201919081908401838280828437509497506121d59650505050505050565b34801561062657600080fd5b5061028b600435612412565b34801561063e57600080fd5b5061028b60048035600160a060020a03169060248035916044359182019101356125c1565b34801561066f57600080fd5b5061067b60043561265b565b60405180806020018415151515815260200183600160a060020a0316600160a060020a03168152602001828103825285818151815260200191508051906020019080838360005b838110156106da5781810151838201526020016106c2565b50505050905090810190601f1680156107075780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34801561072357600080fd5b50610355612734565b34801561073857600080fd5b5060408051602060046024803582810135601f810185900485028601850190965285855261028b95833595369560449491939091019190819084018382808284375094975050600160a060020a03853581169650602090950135909416935061273a92505050565b3480156107ac57600080fd5b506102b7612a95565b3480156107c157600080fd5b5061028b600435612af8565b3480156107d957600080fd5b506040805160206004803580820135838102808601850190965280855261028b9536959394602494938501929182918501908490808284375050604080516020601f818a01358b0180359182018390048302840183018552818452989b8a359b909a90999401975091955091820193509150819084018382808284375094975050509235600160a060020a03169350612b7f92505050565b34801561087d57600080fd5b506104946131eb565b60008181526005602090815260408083208054600180830154600484015460068501546002958601805488516101009682161587026000190190911697909704601f81018a90048a0288018a0190985287875289986060988a98899889988998600160a060020a03909216979196919460ff8084169592840481169462010000909404169291879183018282801561095f5780601f106109345761010080835404028352916020019161095f565b820191906000526020600020905b81548152906001019060200180831161094257829003601f168201915b505050505094509650965096509650965096509650919395979092949650565b80600160a060020a038116151561099557600080fd5b600160a060020a038216600090815260066020526040902054829060ff1615156109be57600080fd5b3330146109ca57600080fd5b600a5460ff1615156001146109de57600080fd5b600085815260086020526040902060010154600160a060020a03848116911614610a0757600080fd5b836040516020018082805190602001908083835b60208310610a3a5780518252601f199092019160209182019101610a1b565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310610a9d5780518252601f199092019160209182019101610a7e565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916600860008781526020019081526020016000206000016040516020018082805460018160011615610100020316600290048015610b425780601f10610b20576101008083540402835291820191610b42565b820191906000526020600020905b815481529060010190602001808311610b2e575b50509150506040516020818303038152906040526040518082805190602001908083835b60208310610b855780518252601f199092019160209182019101610b66565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515610bc257600080fd5b600160a060020a0383166000818152600660209081526040808320805460ff19169055888352600882529182902082518981529283019390935260609082018181528354600260001960018316156101000201909116049183018290527f67785cf16c29d07570d5093a10f1bf680274ff9ddb015bb801999c18cd558fa49389939092889290608083019085908015610c9c5780601f10610c7157610100808354040283529160200191610c9c565b820191906000526020600020905b815481529060010190602001808311610c7f57829003601f168201915b505094505050505060405180910390a15050505050565b606060008082871580610cc857506002548810155b15610cd35760025497505b600092508891505b87821015610d8857600082815260056020526040902054600160a060020a031615801590610d20575060008281526005602052604090206006015460ff161515871515145b8015610d485750600082815260056020526040902060060154610100900460ff161515861515145b8015610d71575060008281526005602052604090206006015462010000900460ff161515851515145b15610d7d576001830192505b600190910190610cdb565b82604051908082528060200260200182016040528015610db2578160200160208202803883390190505b509050600092508891505b87821015610e8457600082815260056020526040902054600160a060020a031615801590610e02575060008281526005602052604090206006015460ff161515871515145b8015610e2a5750600082815260056020526040902060060154610100900460ff161515861515145b8015610e53575060008281526005602052604090206006015462010000900460ff161515851515145b15610e7957818184815181101515610e6757fe5b60209081029091010152600192909201915b600190910190610dbd565b98975050505050505050565b3360008181526004602052604090205460ff161515610eae57600080fd5b60008281526005602081815260408084203380865293019091529091205483919060ff161515610edd57600080fd5b6000848152600560205260409020600601548490610100900460ff1615610f0357600080fd5b600085815260056020526040902060060154859062010000900460ff1615610f2a57600080fd5b60008681526005602081815260408084203385528084018352908420805460ff19169055928990525260040154610f6890600163ffffffff6132f816565b6000878152600560209081526040918290206004019290925580514281529051339289927f0689115a9648267371febe5b74f8643f532350a9a41d4be1756e1e9030c44b17929081900390910190a36001546000878152600560205260409020600401541015610fef576000868152600560205260409020600601805460ff191660011790555b600086815260056020526040902060030154600160a060020a031633141561106a57600086815260056020908152604091829020600601805462ff000019166201000017905581514281529151339289927f25434cd4ef6bc8bcb8c09466f4a148d49a8808e55c4ff151173394bac0164ce192918290030190a35b505050505050565b600033301461108057600080fd5b600160a060020a038216600090815260046020526040902054829060ff1615156110a957600080fd5b6000546110bd90600163ffffffff6132f816565b600154603282111580156110d15750818111155b80156110dc57508015155b80156110e757508115155b15156110f257600080fd5b600160a060020a0385166000908152600460205260408120805460ff1916905593505b600054600019018410156111cb5784600160a060020a031660008581548110151561113c57fe5b600091825260209091200154600160a060020a031614156111c05760008054600019810190811061116957fe5b60009182526020822001548154600160a060020a0390911691908690811061118d57fe5b9060005260206000200160006101000a815481600160a060020a030219169083600160a060020a031602179055506111cb565b600190930192611115565b6000805460001901906111de908261334b565b506111e761131f565b604051600160a060020a038616907f1af6bd3d85a56e7c4a0700756fd2ca3b3b65c266e56c77652c5a346bc256522090600090a25050505050565b60035481565b3360008181526006602052604090205460ff16151561124657600080fd5b60408051600160a060020a038089168252602082018890528087168284015280861660608301528416608082015290517f43341da6506b6e80e576b49a91bffc0dd90c6f218b6b19d753caf865a9a5caf49181900360a00190a1505050505050565b3360008181526006602052604090205460ff1615156112c657600080fd5b60408051600160a060020a0380871682526020820186905284168183015290517f58b09a47044d0872fa22b29a2c4d30639d1e6a48d8434efcb9f6994e1b3755e39181900360600190a150505050565b600a5460ff1681565b600033301461132d57600080fd5b506003545b6002548110156113a957600081815260056020526040902060060154610100900460ff1615801561137b575060008181526005602052604090206006015462010000900460ff16155b156113a1576000818152600560205260409020600601805462ff00001916620100001790555b600101611332565b6002546003556040805142815290517fb9ce9c85727b055bd75ed2418c65d65f31157821337419862d2042439d60168d9181900360200190a150565b60095481565b603281565b60025481565b3360008181526004602052604081205490919060ff16151561141757600080fd5b600083815260056020526040902060060154839060ff161561143857600080fd5b6000848152600560205260409020600601548490610100900460ff161561145e57600080fd5b600085815260056020526040902060060154859062010000900460ff161561148557600080fd5b60008681526005602090815260409182902060068101805461010061ff001990911681179091558154600180840154600280860180548951948116159096026000190190951604601f8101879004870283018701909752868252939a5061155395600160a060020a03909216949192909183908301828280156115495780601f1061151e57610100808354040283529160200191611549565b820191906000526020600020905b81548152906001019060200180831161152c57829003601f168201915b505050505061330f565b1561159457604080514281529051339188917f55d47b3ef994e6498ee206748741ea9f316c915fecd2f02ba467e113f64ab7ee9181900360200190a361106a565b604080514281529051339188917f5ebb796d512ca336f8595033b3fbee6cfee4f065de25e3e721c735911dc546f79181900360200190a350505050600601805461ff001916905550565b3330146115ea57600080fd5b600160a060020a038116600090815260046020526040902054819060ff161561161257600080fd5b81600160a060020a038116151561162857600080fd5b60005461163c90600163ffffffff61333216565b600154603282111580156116505750818111155b801561165b57508015155b801561166657508115155b151561167157600080fd5b600160a060020a0385166000818152600460205260408120805460ff19166001908117909155815490810182559080527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e56301805473ffffffffffffffffffffffffffffffffffffffff191690911790556116e961131f565b604051600160a060020a038616907fad6de4452a631e641cb59902236607946ce9272b9b981f2f80e8d129cb9084ba90600090a25050505050565b60608060006060600080606080606080600954604051908082528060200260200182016040528015611760578160200160208202803883390190505b509650600095505b60095486101561187c57600086815260086020908152604080832060010154600160a060020a03168352600690915290205460ff16156118715760008681526008602090815260408083206001015481517fe024c2d00000000000000000000000000000000000000000000000000000000081529151600160a060020a039091169363e024c2d093600480850194919392918390030190829087803b15801561181057600080fd5b505af1158015611824573d6000803e3d6000fd5b505050506040513d602081101561183a57600080fd5b5051875188908890811061184a57fe5b60209081029091010152865187908790811061186257fe5b90602001906020020151880197505b600190950194611768565b876040519080825280602002602001820160405280156118a6578160200160208202803883390190505b509350876040519080825280602002602001820160405280156118d3578160200160208202803883390190505b509250600095505b600954861015611b805786868151811015156118f357fe5b6020908102909101015115611b7557868681518110151561191057fe5b90602001906020020151604051908082528060200260200182016040528015611943578160200160208202803883390190505b509150868681518110151561195457fe5b90602001906020020151604051908082528060200260200182016040528015611987578160200160208202803883390190505b506000878152600860205260408082206001015481517f715b208b0000000000000000000000000000000000000000000000000000000081529151939450600160a060020a03169263715b208b9260048084019391929182900301818387803b1580156119f357600080fd5b505af1158015611a07573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040908152811015611a3057600080fd5b810190808051640100000000811115611a4857600080fd5b82016020810184811115611a5b57600080fd5b8151856020820283011164010000000082111715611a7857600080fd5b50509291906020018051640100000000811115611a9457600080fd5b82016020810184811115611aa757600080fd5b8151856020820283011164010000000082111715611ac457600080fd5b5060009a509496509450505050505b8686815181101515611ae157fe5b90602001906020020151851015611b75578185815181101515611b0057fe5b9060200190602002015184868801815181101515611b1a57fe5b60ff9092166020928302909101909101528051819086908110611b3957fe5b9060200190602002015183868801815181101515611b5357fe5b600160a060020a03909216602092830290910190910152600190940193611ad3565b6001909501946118db565b50919890975095505050505050565b600081600160a060020a0381161515611ba757600080fd5b600160a060020a038316600090815260066020526040902054839060ff1615611bcf57600080fd5b846007816040518082805190602001908083835b60208310611c025780518252601f199092019160209182019101611be3565b51815160209384036101000a600019018019909216911617905292019485525060405193849003019092205460ff16159150611c3f905057600080fd5b858580600160a060020a031663345309986040518163ffffffff1660e060020a028152600401600060405180830381600087803b158015611c7f57600080fd5b505af1158015611c93573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526020811015611cbc57600080fd5b810190808051640100000000811115611cd457600080fd5b82016020810184811115611ce757600080fd5b8151640100000000811182820187101715611d0157600080fd5b50509291905050506040516020018082805190602001908083835b60208310611d3b5780518252601f199092019160209182019101611d1c565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310611d9e5780518252601f199092019160209182019101611d7f565b51815160209384036101000a60001901801990921691161790526040519190930181900381208751909550879450908301928392508401908083835b60208310611df95780518252601f199092019160209182019101611dda565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310611e5c5780518252601f199092019160209182019101611e3d565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515611e9957600080fd5b333014611ea557600080fd5b600a5460ff161515600114611eb957600080fd5b8751600010611ec757600080fd5b6009546040805180820182528a8152600160a060020a038a166020808301919091526000848152600882529290922081518051949a5091939092611f0f928492910190613374565b5060208201518160010160006101000a815481600160a060020a030219169083600160a060020a0316021790555090505060016007896040518082805190602001908083835b60208310611f745780518252601f199092019160209182019101611f55565b51815160001960209485036101000a8101918216911992909216179091529390910195865260408051968790038201909620805497151560ff19988916179055600160a060020a038e16600090815260069091529490942080549095166001179094555050600954919091109050611feb57600080fd5b60098054600101905560408051878152600160a060020a03891691810191909152606060208083018281528b51928401929092528a517ffa9b2165fc71c1d6ffa03291c7f5d223ea363ec063d747eec9ce2d30d24855ef938a938d938d93608084019186019080838360005b8381101561206f578181015183820152602001612057565b50505050905090810190601f16801561209c5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a15050505050505050565b81818080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050506007816040518082805190602001908083835b6020831061211a5780518252601f1990920191602091820191016120fb565b51815160209384036101000a600019018019909216911617905292019485525060405193849003019092205460ff1615159150612158905057600080fd5b3360008181526006602052604090205460ff16151561217657600080fd5b6040805133602082018190528282529181018590527f933b0e6ba22c9fa6e54e9f516cf6cf46ff1498a763ae2aaee6a4d23425bc2e7791869186919080606081018585808284376040519201829003965090945050505050a150505050565b600083600160a060020a03811615156121ed57600080fd5b3360008181526004602052604090205460ff16151561220b57600080fd5b600280546040805161010081018252600160a060020a038a8116825260208083018b81528385018b8152336060860152600060808601819052600160a0870181905260c0870182905260e08701829052888252600585529690208551815473ffffffffffffffffffffffffffffffffffffffff1916951694909417845590519483019490945592518051949850919490936122ad939185019290910190613374565b50606082810151600383018054600160a060020a0392831673ffffffffffffffffffffffffffffffffffffffff19909116179055608080850151600485015560a0808601516006909501805460c088015160e0909801511515620100000262ff0000199815156101000261ff001998151560ff19909316929092179790971617969096169490941790945560408051918b16825260208083018b9052429383018490529082018581528951958301959095528851339589957fd7c11897713533deb6e710c30ab1de0e47826511b50cef8b93e1d30d675c32cb958e958e958e95929491939192918401919086019080838360005b838110156123b95781810151838201526020016123a1565b50505050905090810190601f1680156123e65780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a360025461240a90600163ffffffff61333216565b60025561106a835b3360008181526004602052604090205460ff16151561243057600080fd5b600082815260056020526040902060060154829060ff16151561245257600080fd5b60008381526005602081815260408084203380865293019091529091205484919060ff161561248057600080fd5b6000858152600560205260409020600601548590610100900460ff16156124a657600080fd5b600086815260056020526040902060060154869062010000900460ff16156124cd57600080fd5b60008781526005602081815260408084203385528084018352908420805460ff19166001908117909155938b9052919052600401546125119163ffffffff61333216565b600088815260056020908152604091829020600401929092558051428152905133928a927f4509facb2564521097d4675ebc3f50a6123df0d145d57229534536e677e7f042929081900390910190a360015460008881526005602052604090206004015410612594576000878152600560205260409020600601805460ff191690555b60008781526005602052604090206006015460ff1615156125b8576125b8876113f6565b50505050505050565b3360008181526006602052604090205460ff1615156125df57600080fd5b7fc7b359b1e189b7d721be7f0765a8d745be718566b8e67cbd2728dae5d6fd64b6858585856040518085600160a060020a0316600160a060020a03168152602001848152602001806020018281038252848482818152602001925060200280828437604051920182900397509095505050505050a15050505050565b6000818152600860208181526040808420600180820154600160a060020a0316808752600685528387205488885295855282548451600261010094831615949094026000190190911692909204601f8101869004860283018601909452838252606096958695939460ff909116939192918591908301828280156127205780601f106126f557610100808354040283529160200191612720565b820191906000526020600020905b81548152906001019060200180831161270357829003601f168201915b505050505092509250925092509193909250565b60015481565b80600160a060020a038116151561275057600080fd5b600160a060020a038316600090815260066020526040902054839060ff16151561277957600080fd5b33301461278557600080fd5b600a5460ff16151560011461279957600080fd5b600086815260086020526040902060010154600160a060020a038581169116146127c257600080fd5b846040516020018082805190602001908083835b602083106127f55780518252601f1990920191602091820191016127d6565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083106128585780518252601f199092019160209182019101612839565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040518091039020600019166008600088815260200190815260200160002060000160405160200180828054600181600116156101000203166002900480156128fd5780601f106128db5761010080835404028352918201916128fd565b820191906000526020600020905b8154815290600101906020018083116128e9575b50509150506040516020818303038152906040526040518082805190602001908083835b602083106129405780518252601f199092019160209182019101612921565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206000191614151561297d57600080fd5b826008600088815260200190815260200160002060010160006101000a815481600160a060020a030219169083600160a060020a031602179055507f6ebec3bc09570e3cf26482a73a6ff7af913480e4d50ccadf106ce6f33d560ddd86868686604051808581526020018060200184600160a060020a0316600160a060020a0316815260200183600160a060020a0316600160a060020a03168152602001828103825285818151815260200191508051906020019080838360005b83811015612a50578181015183820152602001612a38565b50505050905090810190601f168015612a7d5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a1505050505050565b60606000805480602002602001604051908101604052809291908181526020018280548015612aed57602002820191906000526020600020905b8154600160a060020a03168152600190910190602001808311612acf575b505050505090505b90565b333014612b0457600080fd5b6000548160328211801590612b195750818111155b8015612b2457508015155b8015612b2f57508115155b1515612b3a57600080fd5b6001839055612b4761131f565b6040805184815290517f8951393946c27b45080aad111464c16c70f3d5e7d24b114a627334441961bf5f9181900360200190a1505050565b60008085518560328211158015612b965750818111155b8015612ba157508015155b8015612bac57508115155b1515612bb757600080fd5b858580600160a060020a031663345309986040518163ffffffff1660e060020a028152600401600060405180830381600087803b158015612bf757600080fd5b505af1158015612c0b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526020811015612c3457600080fd5b810190808051640100000000811115612c4c57600080fd5b82016020810184811115612c5f57600080fd5b8151640100000000811182820187101715612c7957600080fd5b50509291905050506040516020018082805190602001908083835b60208310612cb35780518252601f199092019160209182019101612c94565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310612d165780518252601f199092019160209182019101612cf7565b51815160209384036101000a60001901801990921691161790526040519190930181900381208751909550879450908301928392508401908083835b60208310612d715780518252601f199092019160209182019101612d52565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b60208310612dd45780518252601f199092019160209182019101612db5565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916141515612e1157600080fd5b7379deccfacd0599d3166eb76972be7bb20f51b46f3314612e3157600080fd5b600a5460ff1615612e4157600080fd5b8751600010612e4f57600080fd5b600095505b8951861015612f2057600460008b88815181101515612e6f57fe5b6020908102909101810151600160a060020a031682528101919091526040016000205460ff16158015612ec357508986815181101515612eab57fe5b90602001906020020151600160a060020a0316600014155b1515612ece57600080fd5b6001600460008c89815181101515612ee257fe5b602090810291909101810151600160a060020a03168252810191909152604001600020805460ff191691151591909117905560019590950194612e54565b8951612f339060009060208d01906133f2565b5060018990556009546040805180820182528a8152600160a060020a038a16602080830191909152600084815260088252929092208151805194995091939092612f81928492910190613374565b5060208201518160010160006101000a815481600160a060020a030219169083600160a060020a0316021790555090505060016007896040518082805190602001908083835b60208310612fe65780518252601f199092019160209182019101612fc7565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060006101000a81548160ff02191690831515021790555060016006600089600160a060020a0316600160a060020a0316815260200190815260200160002060006101000a81548160ff02191690831515021790555060016009600082825401925050819055506001600a60006101000a81548160ff0219169083151502179055507ffa9b2165fc71c1d6ffa03291c7f5d223ea363ec063d747eec9ce2d30d24855ef858989604051808481526020018060200183600160a060020a0316600160a060020a03168152602001828103825284818151815260200191508051906020019080838360005b83811015613119578181015183820152602001613101565b50505050905090810190601f1680156131465780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a17ffa3e1e272694072320aad73a3fadd8876c4bf8f40899c6c7ce2fda9f4e652cfa6000600154604051808060200183815260200182810382528481815481526020019150805480156131d057602002820191906000526020600020905b8154600160a060020a031681526001909101906020018083116131b2575b5050935050505060405180910390a150505050505050505050565b606080606080600060095460405190808252806020026020018201604052801561321f578160200160208202803883390190505b50925060095460405190808252806020026020018201604052801561324e578160200160208202803883390190505b509150600090505b6009548110156132ee576000818152600860205260409020600101548351600160a060020a039091169084908390811061328c57fe5b600160a060020a039283166020918202909201810191909152600083815260088252604080822060010154909316815260069091522054825160ff909116908390839081106132d757fe5b911515602092830290910190910152600101613256565b5090939092509050565b6000808383111561330857600080fd5b5050900390565b6000806040516020840160008287838a8c6187965a03f198975050505050505050565b60008282018381101561334457600080fd5b9392505050565b81548183558181111561336f5760008381526020902061336f918101908301613460565b505050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106133b557805160ff19168380011785556133e2565b828001600101855582156133e2579182015b828111156133e25782518255916020019190600101906133c7565b506133ee929150613460565b5090565b828054828255906000526020600020908101928215613454579160200282015b82811115613454578251825473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03909116178255602090920191600190910190613412565b506133ee92915061347a565b612af591905b808211156133ee5760008155600101613466565b612af591905b808211156133ee57805473ffffffffffffffffffffffffffffffffffffffff191681556001016134805600a165627a7a72305820a1bbc4cd2024e07ddf47758b9f952fb30aeae3bfd35e925c016cd5552f8b7b5a0029"

var logger = log.NewModuleLogger(log.CMDIstanbul)

func Validators(addrs ...common.Address) Option {
	return func(genesis *blockchain.Genesis) {
		extraData, err := extra.Encode("0x00", addrs)
		if err != nil {
			logger.Error("Failed to encode extra data", "err", err)
			return
		}
		genesis.ExtraData = hexutil.MustDecode(extraData)
	}
}

func ValidatorsOfClique(signers ...common.Address) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.ExtraData = make([]byte, clique.ExtraVanity+len(signers)*common.AddressLength+clique.ExtraSeal)
		for i, signer := range signers {
			copy(genesis.ExtraData[32+i*common.AddressLength:], signer[:])
		}
	}
}

func makeGenesisAccount(addrs []common.Address, balance *big.Int) map[common.Address]blockchain.GenesisAccount {
	alloc := make(map[common.Address]blockchain.GenesisAccount)
	for _, addr := range addrs {
		alloc[addr] = blockchain.GenesisAccount{Balance: balance}
	}
	return alloc
}

func Alloc(addrs []common.Address, balance *big.Int) Option {
	return func(genesis *blockchain.Genesis) {
		alloc := makeGenesisAccount(addrs, balance)
		alloc[common.HexToAddress(contract.InitContractAddress)] = blockchain.GenesisAccount{
			Code:    common.FromHex(contract.InitContractBinRuntime),
			Balance: big.NewInt(0),
		}
		genesis.Alloc = alloc
	}
}

func AllocWithPrebaobabContract(addrs []common.Address, balance *big.Int) Option {
	return func(genesis *blockchain.Genesis) {
		alloc := makeGenesisAccount(addrs, balance)
		alloc[common.HexToAddress(contract.InitContractAddress)] = blockchain.GenesisAccount{
			Code:    common.FromHex(PrebaobabInitContractBin),
			Balance: big.NewInt(0),
		}
		genesis.Alloc = alloc
	}
}

func AllocWithBaobabContract(addrs []common.Address, balance *big.Int) Option {
	return func(genesis *blockchain.Genesis) {
		alloc := makeGenesisAccount(addrs, balance)
		alloc[common.HexToAddress(contract.InitContractAddress)] = blockchain.GenesisAccount{
			Code:    common.FromHex(BaobabInitContrctBin),
			Balance: big.NewInt(0),
		}
		genesis.Alloc = alloc
	}
}

func UnitPrice(price uint64) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.UnitPrice = price
	}
}

func Istanbul(config *params.IstanbulConfig) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.Istanbul = config
	}
}

func DeriveShaImpl(impl int) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.DeriveShaImpl = impl
	}
}

func Governance(config *params.GovernanceConfig) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.Governance = config
	}
}

func Clique(config *params.CliqueConfig) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.Clique = config
	}
}

func StakingInterval(interval uint64) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.Governance.Reward.StakingUpdateInterval = interval
	}
}

func ProposerInterval(interval uint64) Option {
	return func(genesis *blockchain.Genesis) {
		genesis.Config.Governance.Reward.ProposerUpdateInterval = interval
	}
}
